var listAndares=[],ordenaParadaCrescente=function(){listAndares.sort(function(a,b){return a[0]-b[0]}),console.log(listAndares)},ordenaParadaDecrescente=function(){listAndares.sort(function(a,b){return a[0]-b[0]}),listAndares.reverse()},incluiParada=function(a){andar=a.closest("section"),numeroAndar=andar.closest("section").find(".title").text().replace(/[^0-9]/g,""),calculaDeslocamento(a),listAndares.push([deslocamento,a]),alturaAndar=a.closest("section").find("article").offset().top,alturaElevador=$("#elevador").offset().top,alturaAndar>alturaElevador?ordenaParadaDecrescente():ordenaParadaCrescente(),decideDestino()},decideDestino=function(){botao=listAndares[0][1],moveElevador(botao)},calculaDeslocamento=function(a){return alturaElevador=$("#elevador").offset().top,alturaAndar=a.closest("section").find("article").offset().top,deslocamento=alturaElevador-alturaAndar-5,deslocamento},statusAndar=function(a){a.closest("section").toggleClass("active"),$("#elevador").find(".porta").toggleClass("aberta")},fimDePercurso=function(){$("#elevador").stop().animate({top:"-="+calculaDeslocamento($(".terreo .sobe"))+"px"},5e3,function(){$("#elevador").find(".porta").toggleClass("aberta"),$(".terreo").closest("section").toggleClass("active"),setTimeout(function(){$("#elevador").find(".porta").toggleClass("aberta")},3e3)})},verificaPortas=function(a){a.closest("section").hasClass("active")&&($("#elevador").find(".porta").stop(),$("#elevador").find(".porta").toggleClass("aberta"))},moveElevador=function(a){calculaDeslocamento(a),$("#elevador").stop().animate({top:"-="+deslocamento+"px"},5e3,function(){a.closest("section").hasClass("active")||statusAndar(a),$(".terreo").closest("section").toggleClass("active"),setTimeout(function(){statusAndar(a),setTimeout(function(){listAndares.shift(),listAndares.length?decideDestino(a):fimDePercurso()},1e3)},3e3)})};$(function(){$("aside a").on("click",function(a){$(this).closest("section");a.preventDefault(),incluiParada($(this))})});